<html>
<head>
<title>Widget test</title>
<meta http-equiv="refresh" content="3" >
<script type="text/javascript" 
src="lib/jquery.min.js">
</script>
<script type="text/javascript" 
    src="lib/jquery-ui.min.js">
</script>
<script type="text/javascript" src="ejohn.js">
</script>
<script src="report.js"></script>
</head>

<body>
<h1 id="header" style="color: red">testbed js !</h1>
<canvas id="myCanvas" width="578" height="200" style="border:1px solid #000000;"></canvas>
<br/>
<textarea 
    style="width: 578px; height: 100px;"
    type="text" id="head" ></textarea>
<script>
function drawCell(line){
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');

  context.beginPath();
//   context.moveTo(line.left, line.top);
//   context.lineTo(line.right, line.top);
//   context.lineTo(line.right, line.bottom);
//   context.lineTo(line.left, line.bottom);
//   context.lineTo(line.left, line.top);
  context.rect(line.left,line.top,line.width,line.height);
  context.stroke();
}
function log(str){
     document.getElementById("head").value += str+'\n'; 
}
function clear(str){
     document.getElementById("head").value = ""; 
}
</script>

<script type="text/javascript" >
   function b(){
       var r = new SampleReport();
       $('#myCanvas').attr('width',r.width);
       $('#myCanvas').attr('height',r.height);
    //   log(r.lines[0].cells.length);
    //   clear();
       r.lines.forEach(function(line){
           if (line.cells)
               var top = line.top;
               line.cells.forEach(function(cell){
                cell.top += top;
                drawCell(cell);
               })
       })
   }
   b();
</script>
</body>
</html>